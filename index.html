<canvas id="canvas"></canvas>
<input type="text" id="input">

<script src="node_modules/qrcode/build/qrcode.min.js"></script>
<script src="settings.js"></script>
<script>

  (function(global){

    var APP = global.APP;
    APP.data = APP.data || "sample text";
    var QRCode = global.QRCode;

    APP.makeQRCode = function(data){
      QRCode.toCanvas(
        document.getElementById("canvas"),
        data,
        function (error) {
          if (error){
            console.error(error);
          }else{
            console.log("success!");
          }
        }
      );
    };

    var input = document.getElementById("input");
    input.addEventListener("change", function(e){
      var data = e.target.value;
      if(data){
        APP.makeQRCode(data);
      }
    });

    var init = function(){
      var data = APP.data;
      input.value = data;
      APP.makeQRCode(data);
    };
    init();

  })(window);
</script>